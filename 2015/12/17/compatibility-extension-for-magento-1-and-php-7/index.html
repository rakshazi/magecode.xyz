<!DOCTYPE html><html><head><title>Compatibility extension for Magento 1 and PHP 7 &mdash; MageCode &mdash; Taming Magento.</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta property="og:type" content="article" /><meta property="og:url" content="http://magecode.xyz//2015/12/17/compatibility-extension-for-magento-1-and-php-7" /><meta property="og:title" content="Compatibility extension for Magento 1 and PHP 7" /><meta property="og:description" content="As promised, we prepared something that will spice up your holidays better than Christmas decorations and mulled wine. In this article you can find o" /><meta property="og:article:published_time" content="1450310400" /><meta property="og:article:author" content="Ivan Curdinjakovic" /><meta property="og:article:section" content="Technology" /><meta property="og:article:tag" content="extensions" /><meta property="og:article:tag" content="php7" /><meta property="og:image" content="http://magecode.xyz/media/logo.png" /><link rel="alternate" type="application/atom+xml" href="http://magecode.xyz/atom.xml" title="MageCode activity feed" /></head><body><div id="wrapper"><!-- Sidebar --><!-- --- use: - posts_categories --- --><div id="sidebar-wrapper"><ul class="sidebar-nav"><li class="sidebar-brand"><a href="/">MageCode</a></li><form action="http://www.google.com" id="cse-search-box" target="_blank"><div><fieldset role="search"><input type="hidden" name="cx" value="partner-pub-5549091042676165:3410918337" /><input type="hidden" name="ie" value="UTF-8" /><input type="text" class="search form-control" name="q"/><!--<input type="submit" name="sa" value="Search" />--></fieldset></div></form><li><a href="http://magecode.xyz/categories/extensions">Extensions</a></li><li><a href="http://magecode.xyz/categories/perfomance">Perfomace</a></li><li><a href="http://magecode.xyz/categories/fixed">Fixed</a></li><li><a href="http://magecode.xyz/categories/orders">Orders</a></li><li class="social-links"><a href="https://facebook.com/magecode.xyz" target="_blank" title="Facebook"><i class="fa fa-facebook-square"></i></a><a href="https://medium.com/@nikus" target="_blank" title="Medium"><i class="fa fa-medium"></i></a><a href="https://twitter.com/magecode_xyz" target="_blank" title="Twitter"><i class="fa fa-twitter-square"></i></a><a href="http://magecode.xyz/atom.xml" target="_blank" title="RSS feed"><i class="fa fa-rss-square"></i></a></li><li><a href="http://magecode.xyz/donate"><b>Donate</b></a></li><!-- --><ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-5549091042676165" data-ad-slot="2814305939"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></ul></div><div id="page-content-wrapper"><div class="container-fluid"><div class="col-md-12"><div class="row"><h1><a href="#menu-toggle" class="btn btn-default btn-lg" id="menu-toggle"><span class="glyphicon glyphicon-menu-hamburger"></span></a> MageCode <small>Taming Magento.</small></h1></div><div class="row"><article><header><h2> Compatibility extension for Magento 1 and PHP 7 <small><a href="http://magecode.xyz/categories/extensions">#extensions</a></small></h2></header><div><p>As promised, we prepared something that will spice up your holidays better than Christmas decorations and mulled wine. In this article you can find <strong>our open-source compatibility extension for Magento and PHP 7</strong> (yes, you read that right!) as well as some of the experiences and performance tests.</p><p>We, at Inchoo, already have a few Magento 1 projects running fine on development servers with PHP 7. <em>It’s alive</em>, we say!</p><h4 id="and-quite-lively%2C-actually.">And quite lively, actually.</h4><p>Despite the official status, Magento 1 loves working on a server with PHP 7. And we love PHP 7. <!-- break --></p><h2 id="show-us-the-code%21">Show us the code!</h2><p>So, how hard is it to patch Magento 1 to work on PHP 7? Very easy. Just install the Inchoo_PHP7 extension, and enjoy!</p><blockquote><p><i class="fa fa-github"></i><a href="https://github.com/Inchoo/Inchoo_PHP7">Inchoo/Inchoo_PHP7</a></p></blockquote><p>"<em>Yeah, you’ve patched the core, but the night is long and community and local folders are full of horrors!</em>", you say, with a sneer of someone who has seen many winters. Yes, sure, but here is something more for your pains:</p><pre><code>-&gt;\$.+\[.+\]\(.*\)
</code></pre><p>This beautiful, readable piece of regex, ran against community and local folders will find a class of problematic code, which no longer works in PHP 7. If none found, your project is (probably) PHP 7 ready! Hooray!</p><h2 id="obligatory-number-crunching">Obligatory number crunching</h2><p>Values in all tables are milliseconds to first byte. Cache, when turned on, was default core M CE cache. All other items in software stack (MySQL, Apache) were same.</p><h4 id="big-%3E70-extensions%2C-thousands-of-products-m-ce-1.9.1.0-project%2C-with-all-patches-applied">Big (>70 extensions, thousands of products) M CE 1.9.1.0 project, with all patches applied</h4><table><thead><tr><th>cached</th><th>category, filtered</th><th>home page</th></tr></thead><tbody><tr><td>PHP 5.6</td><td>800</td><td>320</td></tr><tr><td>PHP 7.0</td><td>420</td><td>120</td></tr></tbody></table><table><thead><tr><th>uncached</th><th>category, filtered</th><th>home page</th></tr></thead><tbody><tr><td>PHP 5.6</td><td>6200</td><td>7300</td></tr><tr><td>PHP 7.0</td><td>3450</td><td>3400</td></tr></tbody></table><h4 id="small-~10-extensions%2C-tens-of-products-m-ce-1.9.2.2-project">Small (~10 extensions, tens of products) M CE 1.9.2.2 project</h4><table><thead><tr><th>cached</th><th>category, filtered</th><th>checkout/cart</th></tr></thead><tbody><tr><td>PHP 5.6</td><td>165</td><td>180</td></tr><tr><td>PHP 7.0</td><td>80</td><td>105</td></tr></tbody></table><table><thead><tr><th>uncached</th><th>category, filtered</th><th>checkout/cart</th></tr></thead><tbody><tr><td>PHP 5.6</td><td>310</td><td>360</td></tr><tr><td>PHP 7.0</td><td>100</td><td>200</td></tr></tbody></table><p>Thanks to Marin Grizelj for crunching the numbers, which speak for themselves. Speedup was 2-3 times just from switching to PHP 7. And, we were comparing it with PHP 5.6, while many projects in the wild are still on 5.5 or even 5.4. (Mind you, compatibility fixes you need to do on older Magento 1 versions to make it work with 5.6, will also bring you a good deal closer to compatibility with 7.0).</p><p>Enough technobabble. It is alive and lively! Let it run into the wild, and scare the village folk!</p></div><div class="row"><a href="http://magecode.xyz/tags/php7" class="badge">php7</a></div><div class="row"> Author: <a href="http://inchoo.net/author/ivan-curdinjakovic/profile/" rel="nofollow" target="_blank">Ivan Curdinjakovic</a></div><div class="row"><a href="//twitter.com/share" class="twitter-share-button" data-url="http://magecode.xyz/2015/12/17/compatibility-extension-for-magento-1-and-php-7" data-via="magecode_xyz" data-counturl="http://magecode.xyz/2015/12/17/compatibility-extension-for-magento-1-and-php-7">Tweet</a><div class="g-plusone" data-size="medium"></div><div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div><div id="fb-root"></div></div><nav><ul class="pagination"><li><a href="http://magecode.xyz/2015/12/17/url-indexer-duplicate-records-problem" aria-label="Previous: An error occurred while saving the URL rewrite"><span aria-hidden="true">&laquo; An error occurred while saving the URL rewrite</span></a></li><li><a href="http://magecode.xyz/2015/12/17/load-single-product-attribute-vs-load-entire-product" aria-label="Next: Load single product attribute vs. load entire product"><span aria-hidden="true">Load single product attribute vs. load entire product &raquo;</span></a></li></ul></nav></article><div id="disqus_thread"></div><script type="text/javascript">;var disqus_shortname='magecode';(function(){var e=document.createElement('script');e.type='text/javascript';e.async=!0;e.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(e)})();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div></div></div></div><link href="http://magecode.xyz/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" href="http://magecode.xyz/components/highlightjs/styles/github.css" /><link href="http://magecode.xyz/components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" /><link href="http://magecode.xyz/css/style.css" rel="stylesheet" type="text/css" /><script src="http://magecode.xyz/components/jquery/jquery.min.js"></script><script src="http://magecode.xyz/components/bootstrap/js/bootstrap.min.js"></script><script src="http://magecode.xyz/components/highlightjs/highlight.pack.js"></script><script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>hljs.initHighlightingOnLoad();</script><script type="text/javascript">(function(t,o,c,s,e,a,n){t['GoogleAnalyticsObject']=e;t[e]=t[e]||function(){(t[e].q=t[e].q||[]).push(arguments)},t[e].l=1*new Date();a=o.createElement(c),n=o.getElementsByTagName(c)[0];a.async=1;a.src=s;n.parentNode.insertBefore(a,n)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-66233712-1','auto');ga('send','pageview');</script><script>;$('#menu-toggle').click(function(e){e.preventDefault();$('#wrapper').toggleClass('toggled')});</script><script>(function(t,c,a){var e,n=t.getElementsByTagName(c)[0];if(t.getElementById(a)){return};e=t.createElement(c);e.id=a;e.async=!0;e.src='//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1';n.parentNode.insertBefore(e,n)}(document,'script','facebook-jssdk'));</script><script type="text/javascript">(function(){var e=document.createElement('script');e.type='text/javascript';e.async=!0;e.src='https://apis.google.com/js/plusone.js';var t=document.getElementsByTagName('script')[0];t.parentNode.insertBefore(e,t)})();</script><script type="text/javascript">(function(){var t=document.createElement('script');t.type='text/javascript';t.async=!0;t.src='//platform.twitter.com/widgets.js';document.getElementsByTagName('head')[0].appendChild(t)})();</script><script type="text/javascript">;$(document).ready(function(){$('table').addClass('table table-bordered table-hover')});</script></body></html>